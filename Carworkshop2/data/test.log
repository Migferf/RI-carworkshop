/*C2*/SET SCHEMA PUBLIC
DISCONNECT
/*C3*/SET SCHEMA PUBLIC
DISCONNECT
/*C4*/SET SCHEMA PUBLIC
drop table TASISTENCIA if exists
drop table TAverias if exists
drop table TCONTENIDOCURSO if exists
drop table TCURSO if exists
drop table TCargos if exists
drop table TClientes if exists
drop table TEXPERTO if exists
drop table TFacturas if exists
drop table TIntervenciones if exists
drop table TMecanicos if exists
drop table TMediosPago if exists
drop table TRepuestos if exists
drop table TSustituciones if exists
drop table TTiposVehiculo if exists
drop table TVEHICULOS if exists
create table TASISTENCIA (apto bit not null, fechaFin date, fechaInicio date, porcentajeAsistencia double not null, curso_id bigint, mecanico_id bigint, primary key (curso_id, mecanico_id))
create table TAverias (id bigint generated by default as identity (start with 1), descripcion varchar(255), fecha date, importe double not null, status varchar(255), factura_id bigint, mecanico_id bigint, vehiculo_id bigint, primary key (id))
create table TCONTENIDOCURSO (Porcentaje_Horas double, curso_id bigint, tipoVehiculo_id bigint, primary key (curso_id, tipoVehiculo_id))
create table TCURSO (id bigint generated by default as identity (start with 1), codigo varchar(255), descripcion varchar(255), Horas_Totales integer, nombre varchar(255), primary key (id))
create table TCargos (importe double not null, factura_id bigint, medioPago_id bigint, primary key (factura_id, medioPago_id))
create table TClientes (id bigint generated by default as identity (start with 1), city varchar(255), street varchar(255), zipCode varchar(255), apellidos varchar(255), dni varchar(255), nombre varchar(255), primary key (id))
create table TEXPERTO (Fecha_Certificado date, mecanico_id bigint, tipoVehiculo_id bigint, primary key (mecanico_id, tipoVehiculo_id))
create table TFacturas (id bigint generated by default as identity (start with 1), fecha date, importe double not null, iva double not null, numero bigint, status varchar(255), primary key (id))
create table TIntervenciones (minutos integer not null, averia_id bigint, mecanico_id bigint, primary key (averia_id, mecanico_id))
create table TMecanicos (id bigint generated by default as identity (start with 1), apellidos varchar(255), dni varchar(255), nombre varchar(255), primary key (id))
create table TMediosPago (DTYPE varchar(31) not null, id bigint generated by default as identity (start with 1), acumulado double not null, numero varchar(255), tipo varchar(255), validez timestamp, codigo varchar(255), disponible double, cliente_id bigint, primary key (id))
create table TRepuestos (id bigint generated by default as identity (start with 1), codigo varchar(255), descripcion varchar(255), precio double not null, primary key (id))
create table TSustituciones (cantidad integer not null, repuesto_id bigint, intervencion_averia_id bigint, intervencion_mecanico_id bigint not null, primary key (intervencion_averia_id, intervencion_mecanico_id, repuesto_id))
create table TTiposVehiculo (id bigint generated by default as identity (start with 1), Horas_Experto integer, nombre varchar(255), precioHora double not null, primary key (id))
create table TVEHICULOS (id bigint generated by default as identity (start with 1), marca varchar(255), matricula varchar(255), modelo varchar(255), NUM_AVERIAS integer, cliente_id bigint, TIPO_ID bigint, primary key (id))
alter table TASISTENCIA add constraint FK4D0342AE3D0A9208 foreign key (curso_id) references TCURSO
alter table TASISTENCIA add constraint FK4D0342AE8147080C foreign key (mecanico_id) references TMecanicos
alter table TAverias add constraint FK53784C8511EA9908 foreign key (factura_id) references TFacturas
alter table TAverias add constraint FK53784C8560A40B0C foreign key (vehiculo_id) references TVEHICULOS
alter table TAverias add constraint FK53784C858147080C foreign key (mecanico_id) references TMecanicos
alter table TCONTENIDOCURSO add constraint FKA24E68173D0A9208 foreign key (curso_id) references TCURSO
alter table TCONTENIDOCURSO add constraint FKA24E6817355CA9AC foreign key (tipoVehiculo_id) references TTiposVehiculo
alter table TCargos add constraint FKD36C6DAB11EA9908 foreign key (factura_id) references TFacturas
alter table TCargos add constraint FKD36C6DAB56F014C8 foreign key (medioPago_id) references TMediosPago
alter table TEXPERTO add constraint FKF2A31C918147080C foreign key (mecanico_id) references TMecanicos
alter table TEXPERTO add constraint FKF2A31C91355CA9AC foreign key (tipoVehiculo_id) references TTiposVehiculo
alter table TIntervenciones add constraint FK2132D8AAEE84D36C foreign key (averia_id) references TAverias
alter table TIntervenciones add constraint FK2132D8AA8147080C foreign key (mecanico_id) references TMecanicos
alter table TMediosPago add constraint FKDE69A06E5254F1C8 foreign key (cliente_id) references TClientes
alter table TSustituciones add constraint FK47B3E086FEAB3249 foreign key (intervencion_averia_id, intervencion_mecanico_id) references TIntervenciones
alter table TSustituciones add constraint FK47B3E0866362618C foreign key (repuesto_id) references TRepuestos
alter table TVEHICULOS add constraint FK57F1E1BAC01AE531 foreign key (TIPO_ID) references TTiposVehiculo
alter table TVEHICULOS add constraint FK57F1E1BA5254F1C8 foreign key (cliente_id) references TClientes
DISCONNECT
/*C5*/SET SCHEMA PUBLIC
INSERT INTO TCURSO VALUES(1,'100z','caca',50,'Yupichan')
COMMIT
